{{!Copyright (c) Microsoft. All rights reserved. Licensed under the MIT license.}}
{{!master(layout/_master.tmpl)}}
{{{rawTitle}}}
{{{conceptual}}}
<script>
// Auto-apply new-tab behavior for marked links.
// Usage in markdown: [Link Text](url){.new-tab}
(function(){
  // Intercept clicks on new-tab links and force them to open in new window
  document.addEventListener('click', function(e){
    var link = e.target.closest('a.new-tab, a[data-new-tab="true"]');
    if (link && link.href) {
      if (!/^https?:\/\//i.test(link.href) && !/^\//.test(link.href) && !/^\.\.?\//.test(link.href)) {
        console.warn('new-tab: Blocked potentially unsafe URL:', link.href);
        return;
      }
      e.preventDefault();
      e.stopPropagation();
      window.open(link.href, '_blank', 'noopener,noreferrer');
      return false;
    }
  }, true);

  // Also handle keyboard navigation (Enter/Space on focused links)
  document.addEventListener('keydown', function(e){
    if ((e.key === 'Enter' || e.key === ' ') && document.activeElement) {
      var link = document.activeElement.closest('a.new-tab, a[data-new-tab="true"]');
      if (link && link.href) {
        if (!/^https?:\/\//i.test(link.href) && !/^\//.test(link.href) && !/^\.\.?\//.test(link.href)) {
          console.warn('new-tab: Blocked potentially unsafe URL:', link.href);
          return;
        }
        e.preventDefault();
        e.stopPropagation();
        window.open(link.href, '_blank', 'noopener,noreferrer');
        return false;
      }
    }
  }, true);
})();
</script>
